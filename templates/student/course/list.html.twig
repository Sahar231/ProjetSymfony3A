{% extends 'base.html.twig' %}

{% block title %}Available Courses - Student{% endblock %}

{% block content %}
<div class="container my-5">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-light p-3 rounded">
            <li class="breadcrumb-item"><a href="{{ path('app_student') }}">Student Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Available Courses</li>
        </ol>
    </nav>

    <h1 class="mb-4">Available Courses</h1>

    {% if courses %}
        <div class="row">
            {% for cours in courses %}
                <div class="col-md-6 lg-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">{{ cours.title }}</h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-2">
                                <strong>Instructor:</strong> {{ cours.creator.username }}
                            </p>
                            <p class="text-muted mb-2">
                                <i class="fas fa-tag"></i> <strong>Category:</strong> {{ cours.category ?? 'Uncategorized' }}
                            </p>
                            <p class="card-text">
                                {{ cours.description[:250] }}{% if cours.description|length > 250 %}...{% endif %}
                            </p>
                            <div class="alert alert-info mb-3">
                                <i class="fas fa-book"></i> <strong>Chapters:</strong> {{ cours.chapitres|length }}
                            </div>
                            <p class="text-muted small">
                                <i class="fas fa-calendar"></i> Created: {{ cours.createdAt|date('Y-m-d') }}
                            </p>
                        </div>
                        <div class="card-footer bg-white">
                            <a href="{{ path('student_course_show', {id: cours.id}) }}" class="btn btn-primary w-100">
                                <i class="fas fa-eye"></i> View Course
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> No courses are available yet. Please check back later!
        </div>
    {% endif %}
</div>
{% endblock %}
